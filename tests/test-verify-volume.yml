---
- set_fact:
    _storage_volume_tests: ['mount', 'fstab', 'fs', 'device'] # fs: type, label  device: name, size, type, disks
  # future:
  #   device:
  #     encryption
  #     raid
  #     compression
  #     deduplication
    _storage_test_volume_present: "{{ current_volume.state == 'present' and (not current_pool|default() or current_pool.state == 'present') }}"

- name:
  include_tasks: "test-verify-volume-{{ storage_test_volume_subset }}.yml"
  loop: "{{ _storage_volume_tests }}"
  loop_control:
    loop_var: storage_test_volume_subset
